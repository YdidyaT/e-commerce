<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product Detail</title>
  <!-- Add Bootstrap CSS if you want similar styling -->
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
  >
  <style>
    /* Some optional quick styling */
    body {
      margin: 2rem;
    }
    .product-image {
      max-width: 300px;
      height: auto;
    }
    .total-price {
      font-size: 1.25rem;
      font-weight: bold;
      color: #d9534f; /* optional color styling */
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="productName">Product Name</h1>
    <div class="row">
      <div class="col-md-4">
        <!-- Product Image -->
        <img 
          id="productImage" 
          src="#" 
          alt="Product Image" 
          class="product-image img-fluid"
        >
      </div>
      
      <div class="col-md-8">
        <!-- Product Price and Quantity -->
        <p>
          <strong>Unit Price:</strong> $<span id="unitPrice">0</span>
        </p>
        
        <div class="form-group">
          <label for="quantity">Quantity:</label>
          <input 
            type="number" 
            id="quantity" 
            class="form-control"
            value="1" 
            min="1" 
            style="width: 100px;"
          >
        </div>

        <!-- Total Price -->
        <p class="total-price">
          <strong>Total:</strong> $<span id="totalPrice">0</span>
        </p>
      </div>
    </div>
    
    <!-- A 'Confirm Purchase' or 'Add to Cart' button could go here -->
    <button class="btn btn-primary">Proceed to Checkout</button>
  </div>

  <!-- Optionally load Bootstrap's JS for styling or form enhancements -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
  ></script>
  <script
    src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
  ></script>

  <script>
    // 1. Get the full query string, e.g. "?product=Datflip%20Esp32&price=999&image=phone-2.png"
    const params = new URLSearchParams(window.location.search);
    
    // 2. Extract our custom parameters
    const productName = params.get('product'); // "Datflip Esp32 S3 Dev Board"
    const productPrice = parseFloat(params.get('price')); // 999
    const productImage = params.get('image'); // "phone-2.png"

    // 3. Update HTML Elements
    document.getElementById('productName').textContent = productName;
    document.getElementById('unitPrice').textContent = productPrice.toFixed(2);
    document.getElementById('productImage').src = 'images/phone/' + productImage;

    // 4. Calculate total when quantity changes
    const quantityInput = document.getElementById('quantity');
    const totalPriceSpan = document.getElementById('totalPrice');

    function updateTotal() {
      const quantityValue = parseInt(quantityInput.value, 10) || 1;
      const total = quantityValue * productPrice;
      totalPriceSpan.textContent = total.toFixed(2);
    }

    // Run once on page load to set initial total
    updateTotal();

    // Listen for user changes
    quantityInput.addEventListener('input', updateTotal);
  </script>
</body>
</html>
